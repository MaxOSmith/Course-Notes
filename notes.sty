%----------------------------
%Packages
%----------------------------
%Use majority of page
\usepackage[margin=0.5in]{geometry}
%Advanced list functionality
\usepackage{enumerate}
%Include math symbols
\usepackage{amsmath, amsthm, amssymb}
%List labels, enumitem to keep use of basic options like [(a)]
\usepackage[shortlabels]{enumitem}
%Drawing Graphs
\usepackage{tikz, tkz-graph}
\usetikzlibrary{shapes, arrows}
%Allows use of lstlisting
\usepackage{listings}
%Ability to define colors
\usepackage{color}
%More detailed titling, used in subtitle
\usepackage{titling}
%Used in pseudocode
\usepackage{algorithm, algpseudocode}
%Remarks & theorems
\usepackage{notes}
%Use of graphics
\usepackage{graphicx}
%Formatting - hline in header
\usepackage{fancyhdr}
%Table of contents linking
\usepackage{hyperref}
%Customize theorems
\usepackage{thmtools, nameref, cleveref}
%To stop reordering figures
\usepackage{float}
%Force ttfamilyi to be courier
\usepackage{courier}


%----------------------------
%Tweaking
%----------------------------

%Horizontal line after header
\setlength{\headheight}{15pt}
\pagestyle{fancy}
\fancyhf{}
\makeatletter
\newcommand{\resetHeadWidth}{\fancy@setoffs}
\makeatother

%Set-up links, enabling table of contents
\hypersetup{
	colorlinks=true,
	linktoc=all,
	linkcolor=blue,
}

%Section in header
\renewcommand{\sectionmark}[1]{\markright{#1}}

%Fix margins
\geometry{letterpaper}
\geometry{tmargin=1in, bmargin=1in}
\resetHeadWidth

%Fixes line numbering
\makeatletter
\lst@Key{matchrangestart}{f}{\lstKV@SetIf{#1}\lst@ifmatchrangestart}
\def\lst@SkipToFirst{%
    \lst@ifmatchrangestart\c@lstnumber=\numexpr-1+\lst@firstline\fi
    \ifnum \lst@lineno<\lst@firstline
        \def\lst@next{\lst@BeginDropInput\lst@Pmode
        \lst@Let{13}\lst@MSkipToFirst
        \lst@Let{10}\lst@MSkipToFirst}%
        \expandafter\lst@next
    \else
        \expandafter\lst@BOLGobble
    \fi}
\makeatother
\lstset{matchrangestart=t}

%Additional Tikz libraries
\usetikzlibrary{calc, matrix}

%List bullet dash default
\def\labelitemi{--}

%----------------------------
%Formatting Definitions
%----------------------------
\definecolor{gray}{rgb}{0.5, 0.5, 0.5}
\definecolor{maize}{RGB}{255, 203, 5}
\definecolor{Mblue}{RGB}{0, 39, 76}

\definecolor{sublime_yellow}{RGB}{230, 219, 95}
\definecolor{sublime_red}{RGB}{249, 38, 114}
\definecolor{sublime_blue}{RGB}{102, 217, 239}
\definecolor{sublime_purple}{RGB}{157, 129, 255}
\definecolor{sublime_black}{RGB}{39, 40, 34}
\definecolor{sublime_gray}{RGB}{117, 104, 69}
\definecolor{sublime_white}{RGB}{255, 255, 255}


%Code =======================

\definecolor{pblue}{rgb}{0.13,0.13,1}
\definecolor{pgreen}{rgb}{0,0.5,0}
\definecolor{pred}{rgb}{0.9,0,0}
\definecolor{pgrey}{rgb}{0.46,0.45,0.48}

%Default C++
\lstdefinestyle{C++}{
	language=C++,	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=8pt,
	numberstyle=\small\ttfamily\color{pgrey},
	basicstyle={\small\ttfamily},
	commentstyle=\color{gray},
	showstringspaces=false,
	tabsize=4,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color[HTML]{A71D5D},
    stringstyle=\color[HTML]{0086B3},
    basicstyle=\ttfamily
}

%Sublime Dark C++
\lstdefinestyle{s-C++}{
	language=C++,	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=5pt,
	backgroundcolor=\color{sublime_black},
	numberstyle=\small\ttfamily\color{gray},
	stringstyle=\color{sublime_yellow},
	keywordstyle=\small\ttfamily\color{sublime_red},
	basicstyle=\small\ttfamily\color{sublime_white},
	identifierstyle=\small\ttfamily\color{sublime_blue},
	commentstyle=\color{sublime_gray},
	showstringspaces=false,
	tabsize=4,
	frame=leftline
}

%Default Python
\lstdefinestyle{Python}{
	language=Python,	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=8pt,
	numberstyle=\small\ttfamily\color{pgrey},
	basicstyle={\small\ttfamily},
	commentstyle=\color{gray},
	showstringspaces=false,
	tabsize=4,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color[HTML]{A71D5D},
    stringstyle=\color[HTML]{0086B3},
    basicstyle=\ttfamily
}


%Default Java
\lstdefinestyle{Java}{
	language=Java,	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=8pt,
	numberstyle=\small\ttfamily\color{pgrey},
	basicstyle={\small\ttfamily},
	commentstyle=\color{gray},
	showstringspaces=false,
	tabsize=4,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color[HTML]{A71D5D},
    stringstyle=\color[HTML]{0086B3},
    basicstyle=\ttfamily
}

%Sublime Dark Java
\lstdefinestyle{sJava}{
	language=Java,	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=5pt,
	backgroundcolor=\color{sublime_black},
	numberstyle=\small\ttfamily\color{gray},
	stringstyle=\color{sublime_yellow},
	keywordstyle=\small\ttfamily\color{sublime_red},
	basicstyle=\small\ttfamily\color{sublime_white},
	identifierstyle=\small\ttfamily\color{sublime_blue},
	commentstyle=\color{sublime_gray},
	showstringspaces=false,
	tabsize=4,
	frame=leftline
}

%Default LaTeX
\lstdefinestyle{s-tex}{
	language=[LaTeX]{TeX},	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=8pt,
	numberstyle=\small\ttfamily\color{pgrey},
	basicstyle={\small\ttfamily},
	commentstyle=\color{gray},
	showstringspaces=false,
	tabsize=4,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color[HTML]{A71D5D},
    stringstyle=\color[HTML]{0086B3},
    basicstyle=\ttfamily
}

%Sublime Dark LaTeX
\lstdefinestyle{s-tex}{
	language=[LaTeX]{TeX},	
	aboveskip=3mm,
	belowskip=3mm,
	numbers=left,
	numbersep=5pt,
	backgroundcolor=\color{sublime_black},
	numberstyle=\small\ttfamily\color{gray},
	stringstyle=\color{sublime_yellow},
	keywordstyle=\small\ttfamily\color{sublime_red},
	basicstyle=\small\ttfamily\color{sublime_white},
	identifierstyle=\small\ttfamily\color{sublime_blue},
	commentstyle=\color{sublime_gray},
	showstringspaces=false,
	tabsize=4,
	frame=leftline
}

\lstset{literate=%
    {0}{{{\color{sublime_purple}0}}}1
    {1}{{{\color{sublime_purple}1}}}1
    {2}{{{\color{sublime_purple}2}}}1
    {3}{{{\color{sublime_purple}3}}}1
    {4}{{{\color{sublime_purple}4}}}1
    {5}{{{\color{sublime_purple}5}}}1
    {6}{{{\color{sublime_purple}6}}}1
    {7}{{{\color{sublime_purple}7}}}1
    {8}{{{\color{sublime_purple}8}}}1
    {9}{{{\color{sublime_purple}9}}}1
}

%Page Details ===============

%Title
\newcommand{\titleHeader}[5]{
	\pagenumbering{roman}
	\begin{center}
		\textbf{\Huge{#1}} \\
		\Large{#2} \\
		\vspace{2mm}\includegraphics[scale=0.2]{#5} \\
		#3 - #4 \\
	\end{center}
}

%Table of Contents
\newcommand{\toc}{
	\setcounter{page}{1}
	\setcounter{secnumdepth}{0}
	\tableofcontents{}
	%Dividing line & skip to next page
	\noindent\rule[0.5ex]{1\columnwidth}{.5pt}
	\newpage{}
}

%Abstract
\newcommand{\abstr}[1]{
	\begin{abstract}
		\noindent
		#1
	\end{abstract}
	\setcounter{secnumdepth}{2}
	\setcounter{page}{2}
	\pagenumbering{arabic}
}

%Theorem/rem/etc ============

%Style of following declarations
\theoremstyle{definition}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

\declaretheorem[name=Example,
refname={example,examples},
Refname={Example,Example},
numberwithin=section]{exmp}

\declaretheorem[name=Remark,
refname={remark,remarks},
Refname={Remark,Remarks},
numberwithin=section]{rem}

\declaretheorem[name=Proposition,
refname={proposition,propositions},
Refname={Proposition,Propositions},
numberwithin=section]{prop}

\declaretheorem[name=Definition,
refname={definition,definitions},
Refname={Definition,Definitions},
numberwithin=section]{defn}

%Other ======================

%Big-O notation, must be in math mode
\renewcommand{\O}[1]{
	\mathcal{O}(#1)
}

%Tikz style definitions
\tikzstyle{decision} = [diamond, draw,
    text width=4.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, 
    text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{cloud} = [draw, ellipse, node distance=3cm, minimum height=2em]

\resetHeadWidth